@import "/overlays/shared/theme.css";

/* ========================================================================== */
/* ROOT WRAPPER — fixed 1200 × 800                                            */
/* ========================================================================== */
.bb-arena-root {
  width: 1200px;
  height: 800px;
  position: relative;
  overflow: hidden;
  background: rgba(5, 5, 8, 0.75);
  border: 2px solid rgba(255,255,255,0.08);
  backdrop-filter: blur(10px);
  box-shadow:
    0 0 40px rgba(255,77,79,0.35),
    inset 0 0 50px rgba(0,0,0,0.75);
}

/* ========================================================================== */
/* TWIST TAKEOVER (fullscreen)                                                 */
/* ========================================================================== */
.bb-twist-takeover {
  position: absolute;
  inset: 0;
  z-index: 50;
  background: rgba(15,15,20,0.92);
  display: flex;
  justify-content: center;
  align-items: center;
  backdrop-filter: blur(12px);
  opacity: 0;
  pointer-events: none;
  transition: opacity 0.3s ease-out;
}

.bb-twist-takeover.show {
  opacity: 1;
  pointer-events: all;
  animation: bb-twist-flash 0.55s ease-out,
             bb-crt-pulse 2s infinite ease-in-out;
}

@keyframes bb-twist-flash {
  0%   { opacity: 0;   filter: brightness(0.2); }
  50%  { opacity: 1;   filter: brightness(3); }
  100% { opacity: 1;   filter: brightness(1.2); }
}

@keyframes bb-crt-pulse {
  0%   { opacity: 1; }
  50%  { opacity: 0.85; }
  100% { opacity: 1; }
}

/* ========================================================================== */
/* HUD — CENTER OCTAGON                                                       */
/* ========================================================================== */
.bb-hud {
  width: 350px;
  height: 350px;
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  clip-path: polygon(
    10% 0%, 90% 0%,
    100% 15%, 100% 85%,
    90% 100%, 10% 100%,
    0% 85%, 0% 15%
  );
  background: rgba(20,20,24,0.75);
  border: 2px solid rgba(255,255,255,0.14);
  box-shadow:
    0 0 25px rgba(0,0,0,0.8),
    inset 0 0 32px rgba(0,0,0,0.55),
    inset 0 0 22px rgba(255,77,79,0.25);
  transition: box-shadow 0.3s ease-out;
}

.hud-inner {
  position: relative;
  width: 100%;
  height: 100%;
  z-index: 5;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
}

/* HUD TEXT */
.hud-round-text {
  font-size: 38px;
  font-weight: 800;
  color: var(--bb-orange);
  text-shadow: var(--glow-hard-orange);
}

.hud-type-text {
  font-size: 26px;
  opacity: 0.85;
}

.hud-timer {
  font-size: 52px;
  font-weight: 900;
  color: white;
  text-shadow: var(--glow-mid-turq);
  transition: transform 0.2s ease-out;
}

/* HUD ROUND START SHOCKWAVE */
@keyframes bb-hud-shockwave {
  0%   { opacity: .6; transform: scale(.78); filter: blur(4px); }
  60%  { opacity: 1;  transform: scale(1.1); filter: blur(0);   }
  100% { opacity: 1;  transform: scale(1);   }
}

.bb-hud-start {
  animation: bb-hud-shockwave 0.6s cubic-bezier(.2,.9,.3,1);
}

/* HUD TIMER TICK ANIMATION */
@keyframes bb-timer-tick {
  0%   { color:white; }
  50%  { color:var(--bb-orange); text-shadow:0 0 12px var(--bb-orange); }
  100% { color:white; }
}

.bb-timer-tick {
  animation: bb-timer-tick 0.4s ease-out;
}

/* ========================================================================== */
/* HUD PROGRESS RING                                                          */
/* ========================================================================== */
.hud-ring { position:absolute; top:0; left:0; }
.hud-ring-bg { fill:none; stroke:rgba(255,255,255,0.12); }

.hud-ring-progress {
  fill:none;
  stroke:var(--bb-orange);
  stroke-linecap:round;
  transform-origin:50% 50%;
  transform:rotate(-90deg);
  transition: stroke-dashoffset .2s linear;
  filter:drop-shadow(0 0 6px rgba(255,77,79,0.9));
}

/* ========================================================================== */
/* PLAYER CARDS                                                               */
/* ========================================================================== */
#arena-players {
  position:absolute;
  inset:0;
  pointer-events:none;
}

.bb-player-card {
  width:160px;
  height:160px;
  position:absolute;
  clip-path:polygon(
    12% 0%, 88% 0%,
    100% 18%, 100% 82%,
    88% 100%, 12% 100%,
    0% 82%, 0% 18%
  );
  background:rgba(12,12,18,0.72);
  border:2px solid rgba(255,255,255,0.12);
  box-shadow:
    0 0 20px rgba(0,0,0,0.65),
    inset 0 0 22px rgba(0,0,0,0.65),
    inset 0 0 14px rgba(255,77,79,0.18);
  overflow:hidden;
  display:flex;
  justify-content:center;
  align-items:flex-end;
  padding-bottom:12px;

  transition:
    left .35s cubic-bezier(.2,.7,.3,1),
    top .35s cubic-bezier(.2,.7,.3,1),
    transform .35s cubic-bezier(.2,.7,.3,1),
    border-color .25s ease-out,
    box-shadow .25s ease-out;
}

/* BACKGROUND AVATAR */
.bb-player-bgavatar {
  position:absolute;
  inset:0;
  background-size:cover;
  background-position:center;
  opacity:.18;
  filter:blur(1px);
}

/* LABELS */
.bb-player-labels {
  position:relative;
  z-index:2;
  text-align:center;
}

.bb-player-name {
  font-size:18px;
  font-weight:800;
  color:white;
  margin-bottom:4px;
  text-shadow:0 0 8px black;
  max-width:140px;
  white-space:nowrap;
  overflow:hidden;
  text-overflow:ellipsis;
}

.bb-player-score {
  font-size:16px;
  opacity:.85;
  transition:transform .25s, color .25s;
}

/* POSITION BADGE */
.bb-player-pos {
  position:absolute;
  top:4px; left:4px;
  width:32px; height:32px;
  line-height:32px;
  font-size:18px;
  font-weight:900;
  background:var(--bb-orange);
  color:black;
  clip-path:polygon(
    25% 0%, 75% 0%,
    100% 50%, 75% 100%,
    25% 100%, 0% 50%
  );
  text-shadow:var(--glow-soft-orange);
  z-index:4;
}

/* ========================================================================== */
/* STATUS EFFECTS                                                             */
/* ========================================================================== */

/* ALIVE */
.status-alive {
  border-color:rgba(255,255,255,0.75);
  box-shadow:
    0 0 18px rgba(255,255,255,0.35),
    inset 0 0 18px rgba(255,255,255,0.22);
}

/* IMMUNE */
.status-immune {
  border-color:#00ff99;
  box-shadow:0 0 22px rgba(0,255,145,1),
             inset 0 0 22px rgba(0,255,145,.55);
  animation:bb-immune-glow 1.3s infinite ease-in-out;
}
@keyframes bb-immune-glow {
  0% { box-shadow:0 0 12px rgba(0,255,150,.7); }
  50%{ box-shadow:0 0 28px rgba(0,255,170,1); }
  100%{ box-shadow:0 0 12px rgba(0,255,150,.7); }
}

/* IMMUNE BROKEN */
.status-immune-broken {
  animation:bb-immune-broken .7s infinite;
}
@keyframes bb-immune-broken {
  0% { border-color:white; box-shadow:0 0 12px white; }
  100%{ border-color:white; box-shadow:0 0 26px white; }
}

/* DANGER */
.status-danger {
  border-color:#ff8800;
  box-shadow:
    0 0 26px rgba(255,136,0,1),
    inset 0 0 26px rgba(255,136,0,.55);
  animation:bb-danger-pulse 1.2s infinite;
}

@keyframes bb-danger-pulse {
  0% { box-shadow:0 0 14px rgba(255,140,40,.7); }
  50%{ box-shadow:0 0 30px rgba(255,160,40,1); }
  100%{ box-shadow:0 0 14px rgba(255,140,40,.7); }
}

/* ELIMINATION */
.status-elimination {
  border-color:#ff0033;
  box-shadow:
    0 0 32px rgba(255,0,51,.9),
    inset 0 0 32px rgba(255,0,51,.55);
  animation:bb-elim-explode .55s forwards;
}
@keyframes bb-elim-explode {
  0% { transform:scale(1); opacity:1; }
  30%{ transform:scale(1.25); opacity:1; filter:brightness(2); }
  100%{ transform:scale(.35); opacity:.2; filter:brightness(.6); }
}

/* JOIN ANIMATION */
.bb-player-card.join-anim {
  animation:bb-join-pop .45s cubic-bezier(.25,1.15,.3,1.1);
}
@keyframes bb-join-pop {
  0%{ transform:scale(0) rotate(var(--rot)); opacity:0; }
  60%{ transform:scale(1.25) rotate(var(--rot)); opacity:1; }
  100%{ transform:scale(1) rotate(var(--rot)); }
}

/* SCORE FLASH */
.bb-score-anim {
  animation:bb-score-flash .35s ease-out;
}
@keyframes bb-score-flash {
  0%{ color:white; transform:scale(1); }
  50%{ color:gold;  transform:scale(1.32); }
  100%{ color:white; transform:scale(1); }
}

/* ========================================================================== */
/* GALAXY TWIST ANIMATIONS (vortex, rings, flares, stars)                     */
/* ========================================================================== */

.twist-anim.galaxy-vortex {
  position:absolute;
  inset:0;
  overflow:hidden;
}

/* starfield */
.galaxy-stars {
  position:absolute;
  inset:0;
  background: radial-gradient(circle at 50% 50%, rgba(255,255,255,.35), transparent 70%);
  opacity:.25;
  animation: galaxy-stars-float 6s linear infinite;
}

@keyframes galaxy-stars-float {
  0%{ transform: translate(0,0); }
  100%{ transform: translate(-4%, -2%); }
}

/* main vortex ring */
.galaxy-ring,
.galaxy-ring2 {
  position:absolute;
  top:50%;
  left:50%;
  width:600px;
  height:600px;
  transform: translate(-50%, -50%);
  border:4px solid rgba(255,255,255,0.15);
  border-radius:50%;
  animation: galaxy-spin 2.5s linear infinite;
}

.galaxy-ring2 {
  width:750px;
  height:750px;
  opacity:.12;
  animation-duration:4.5s;
}

@keyframes galaxy-spin {
  from { transform:translate(-50%, -50%) rotate(0deg); }
  to   { transform:translate(-50%, -50%) rotate(360deg); }
}

.galaxy-flare {
  position:absolute;
  top:50%; left:50%;
  width:320px; height:320px;
  transform:translate(-50%,-50%);
  background:radial-gradient(circle, rgba(255,77,200,0.4), transparent 70%);
  animation: galaxy-flare-pulse 2s ease-in-out infinite;
}

@keyframes galaxy-flare-pulse {
  0%  { opacity:.3; transform:translate(-50%,-50%) scale(0.85); }
  50% { opacity:.7; transform:translate(-50%,-50%) scale(1.1); }
  100%{ opacity:.3; transform:translate(-50%,-50%) scale(0.85); }
}

/* ========================================================================== */
/* END OF FILE                                                                 */
/* ========================================================================== */
